---
title: 第41条：将原型视为实现细节
tags: 编写高质量javascript代码的68条有效方法
grammar_cjkRuby: true
---
一个对象给其使用者提供了轻量、简单、强大的操作集。使用者与一个对象最基本的交互是获取其属性值和调用其方法。这些操作不是特别在意属性存储在原型继承结构的哪个位置。随着时间推移，实现对象时可能会将一个属性实现在对象原型链的不同位置，但是只要其值保持不变，那么这些基本操作的行为也不变。原型是一种对象行为的实现细节。
js提供了便利的内省机制来检查对象的细节。Object.prototype.hasOwnProperty方法确定一个属性是否为对象"自己的"属性（即一个实例的属性），而完全忽略原型继承结构。Object.getPrototypeOf和__proto__特性，允许程序员遍历对象的原型链并单独查询其原型对象。
优秀程序员知道什么时候考虑抽象边界。检查实例细节（即使没有修改它们）也会在程序的组件之间创建依赖。如果对象的生产者修改了实现细节，那么依赖于这些对象的使用者就会被破坏。很难诊断出这类BUG，因为它们构成了超距作用(action at a distance),即一个作者修改了一个组件的实现，导致另一个组件被破坏。
js并不区分对象的公有属性和私有属性。取而代之的是，你的责任是依靠文档和约束。如果一个程序库提供的对象的属性没有文档化或者明文标注为内部属性，对于使用者来说，最好不要干涉那些属性。

## 提示
- 对象是接口，原型是实现
- 避免检查你无法控制的对象的原型结构
- 避免检查实现在你无法控制的对象内部的属性


 